---
description: PDF処理専用ルール - PDF抽出と文字化け対応の専門ルール
globs: ["**/pdf_processing/*.js", "**/server.js"]
alwaysApply: false
---

# PDF処理専用ルール

## PDF処理の専門性
- **rirekisho形式のみ**: 他の履歴書形式は考慮しない
- **文字化け対応**: スペースの「G」文字化けなど既知の問題に対応
- **パターンマッチング**: 既存の正規化処理との整合性を維持
- **段階的抽出**: 氏名→年齢→連絡先→学歴・職歴の順で処理

## 文字化け対策
- **URIデコード**: 文字化けした文字の復元
- **NFKC正規化**: Unicode正規化による文字統一
- **正規表現**: 文字化けパターンの検出と修正
- **フォールバック**: 複数の抽出方法の試行

## 信頼度管理
- **信頼度計算**: 各抽出結果の信頼性を数値化
- **閾値設定**: 信頼度が低い場合は処理を拒否
- **複数候補検出**: 複数の候補が見つかった場合は即座に拒否
- **部分一致拒否**: 部分一致は安全性のため基本的に拒否
