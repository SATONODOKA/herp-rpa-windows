## Serena MCP使用ガイドライン
- **複雑なコード解析**や**アーキテクチャ理解**が必要な場面では積極的にSerenaを使用する
- **Serena推奨場面**：
  - コードベース全体の構造理解
  - シンボル間の参照関係調査
  - クラス・関数・変数の使用箇所特定
  - ファイル間の依存関係分析
  - 大規模リファクタリングの影響範囲調査
  - 設計パターンの実装箇所探索
  - バグの原因となる関連コード特定
- **通常ツール推奨場面**：
  - 単純なファイル読み込み・編集
  - 既知のファイル・関数への直接的な変更
  - シンプルな文字列検索・置換
- Serena MCPの機能を活用して効率的で正確なコード分析を心がける

## プロジェクト固有のルール
- PDF処理機能の改善時は、既存のパターンマッチングロジックを理解してから修正する
- RAコメント処理の安全性チェックは最優先で維持する
- 文字化け問題の修正時は、既存の正規化処理との整合性を確認する

## 作業完了時のルール
- **何かの更新をした際は以下を必ず実行する**：
  1. ファイルの中身を完全に更新しきる
  2. サーバーが起動していない場合は起動する（npm start）
  3. 必要なディレクトリが存在しない場合は作成する
  4. エラーがないことを確認してから作業完了とする
- **フォルダ構造変更時は特に注意**：
  - 全ての依存パスを更新する
  - 必要なディレクトリを事前に作成する
  - server.jsのrequireパスを確実に更新する
